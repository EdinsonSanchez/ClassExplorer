var Lib = function () {},
    lib = new Lib();

/**
 * @param {string} url
 * @param {object} data
 * @param {function} callback
 * @private
 */
Lib.prototype.load = function (url, data, callback) {

    var xhr = new XMLHttpRequest();

    xhr.open(data ? "POST" : "GET", url);

    xhr.onreadystatechange = function () {
        if (xhr.readyState === 4 && xhr.status === 200) {
            return callback(null, JSON.parse(xhr.responseText) || {});
        } else if (xhr.readyState === 4) {
            callback(xhr.responseText + ", " + xhr.status + ": " + xhr.statusText);
        }
    };

    xhr.send(data ? JSON.stringify(data) : undefined);

};

/**
 * Return number of readable properties in object.
 * @param object
 */
Lib.prototype.countProperties = function (object) {

    var c = 0, p;

    for (p in object) {
        c++;
    }

    return c;

};

/**
 * Contains graphic base64s for the application.
 */
Lib.prototype.image = {
    chip: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAK3RFWHRDcmVhdGlvbiBUaW1lAE1pIDE3IERleiAyMDAzIDIyOjM1OjIxICswMTAw2q8EHwAAAAd0SU1FB9MCGRcbLxQhzGIAAAAJcEhZcwAACvAAAArwAUKsNJgAAAAEZ0FNQQAAsY8L/GEFAAACEklEQVR42sWTz6sSURTHj/gjFUVdDAQOhDhgDwRJSXHjSoRCc+XORbt2blpUu/6A1iHu4tFGcCUVvtVDIfwBpk6rRJ/ib1MZdfytM5070KMieC0edGDuDHfu53y/59x7Af53yG74L49GowxFUa9ms9kVz/PpVCr1BefFGxM4HA6j1Wq9YBjmIU3TgDAMh0NxMpn0RqPRh8Vi8bJUKnGKv8HhcPipwWB44XK57isUCkB12Gw2oFQqZXK5nMYEz47H4xtcysl/Bb1e712n0xlF5YTP56MOhwMsl0vYbrdAvsfjMbAsC7FYDERRPKtUKufXDvx+v9VoNF4GAgHaZDLBdDqF9XotgbiY2IdCoQCozFssFgHtW6UmkSESicTtdvu7YDBoUKlUMJ/PJcv7/R5OpxO0220ol8uQSCRAr9efisXiVbVafd7tduuSA5vNFgmFQrJOpyNZJiBRFgQBms2mBK9Wq0OtVuvjm4rH4w8QOxFWSqDT6Q5ESaPRAMdxsNvtJLjRaEA+n4dkMgmoqEin0yzuwtuf8HUJ2LTHZrPZQqyTUKvVEliv10lSEbfsG4KaXC7nQ/vsbweFDFjXe2zQEpvl1Wq1dxCAbDYLaJWUJ8tkMh97vd5rTMrCHyElaLVaAj6fsb7zfr9/D/f6DNV5dPQV5/So/AQFKv98lD0ezyPsw9ztdjODweA71v7pdm/QbcYPCZIkO9gEQq4AAAAASUVORK5CYII=",
    moleculeCube: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAKnRFWHRDcmVhdGlvbiBUaW1lAE1pIDUgTXJ6IDIwMDMgMjM6MzY6MDEgKzAxMDC/PwNMAAAAB3RJTUUH0wMFFxI6j5FSVwAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAAKtSURBVHjaY2CgBvjPwMB4WYlB4z0DAxuKuDFD0Tc3nndnGBnyUMSFGPhgbEYQ8cWBbSmXmlDUtYUvLq1o6p7PzsSo9eTzD61r1y6abPyznT2c2fezrrrShl+MrMcnH23w+yci5H56x7seiy8MZWAD3llyvHsrJyDYzRfEwMjK9OPdzStrS54f8GD7xMB3/TnDv238Yh3v7G2ctTW0rHnf32Ks/bmT4dDGjx/s3zEIMoMM8H355/uvW18czt++s+2HhfWjgrcX/c0iRXkkuP8xv3jGyPKmtsVOnIPt482Hj5ZqL1/+X+ruT9k77xkWrmRg2Ar3V82ESetd/PzDQOw30gyL/gdy//9vwfB/HzPDZ2ldfQmYusSMTLekqJhDMD4LjMHx5dMTATZWaRD79XOGpjPbvpr8/M0gvdPd//fT7RtfwNQJ8/HyfmT4/xbGZ4Ixfv/+/ZSbh0cKxNb8x3BnS31H39bwsF9aauzcL5kY0mHquDg4eNmYmT9iGPDsx7+nf5hYFEHsgKBgvl+PHmh9ZGYXyX66iaPTzaMmOD5eG2wRBw/vby4euAGM0HTA9DFQ5PxdFgHdm+d/n9ni6C7N9uf3bUYmFs3EubNX95mY3RUwMUlSZfp93+/TWZVTLxgYJfecs/diYHgFdsFjSQZO9pcfND+zcjNeUlQVOH3ihAYLG3szhwD/dzsGhpwNZ071X71y2ZDlxoV/IhJ/NZN+nNO4zcDgAw9EuecMX08+/xP3+thFt+dFxYo+Ztz72K+fXXyPXYf/AieDfF9akZ2qqFD5kz8Mf07O6bsp+ZrhrxgDw05cKZs5JiS073+40P99edb/D4sy/A0pKL7i6OoaAvMy4bwhwWD43x2YDgI5/18RYfi7nYFBkNT8xXiIi2Hebn6Gt8DU1kSqZpIAAN9VByIMFaPkAAAAAElFTkSuQmCC",
    blueFlag: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAKnRFWHRDcmVhdGlvbiBUaW1lAERpIDIgU2VwIDIwMDMgMTY6NTA6MjkgKzAxMDBpQ0TdAAAAB3RJTUUH0wkCDjMC75xHzQAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAAHsSURBVHjapZK9ixNBGMafmd3b2b3NRTkwhHQiioWN2Nh5EBBEK4v7E8S/wN7CztomZ6EI2ggpDrFQOdHCRmxEEIsU5mMje0luZ7+zM+vsekkOc2Dk3mLZXd7n9z7vMwOcsMjspdVq3dcouTvwxPru8NyrX9XLbZKmXpYmpibErY11cp1HssryKZ+4B1/6j6/eLHT6DFCv1+9sbV2r7bZf4oLIty9drG7/HCYY7udIUh/d2MKZeg03rhiVt+3PZv9QR2eAIAicKIqxPxpD8hE2N3QI04YTAt+6PjTlVeYSIgP4xPfwN8D3fUfXdZimhSwOIaT6masdSdFEFjsrReBFywAp5UAIAWYyyGmETBwfGlUKb+wtA9R0J45jMGYBWaSsysVU8udBC7VyFXp8DtAXTaQEGIYBKlOIaQ6qFcdEyrEiCNSaIXqbNahUD44FJEmiMmDIVVLdPkco15CFAehonE8Gox13mj198T48C9hflwBq8qB0wEywtIsPzx8+c83mGyIimRPtR7Z3+9Nh68ejmcwBKsDSwZrBUGEU58W7773XD5786ybOQ2w0GkUGeZFB4QIaO73KVZ4Dms0mVycRlIAiSEpP/RegqDRNHdu2VZAmNE2rrALQj364rrvT6XTucc57lmU9WgVw4voNC4zd70vBO2kAAAAASUVORK5CYII=",
    ghost: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAKnRFWHRDcmVhdGlvbiBUaW1lAERvIDYgTXJ6IDIwMDMgMjM6NTk6MTcgKzAxMDCMVVlHAAAAB3RJTUUH0wMGFxkwngXNbAAAAAlwSFlzAAAK8AAACvABQqw0mAAAAARnQU1BAACxjwv8YQUAAAJkSURBVHjapVNNTxNRFL3TTvno9EuqmNZpymihWKhNkBrTLtQ0Gt1IYsqiEohrkiYuYOEPkISlEFmQuGqicclC2RAjLthha2hjMBSaJii0NLRTnDLTmY53pqGpKaKJL3l5d97cc+45790H8J+DOG1zdnbtXqm0P03T5us8L1RTqewnvd7wfG7uceKvjAsLX5+urqZrctOQJFmen//AR6Nvw2eCY7Hs1ZWV7SrHSQ1wPJ5W1xpSzsy8/zk5+cbVjNE0f+zt7T9hGDPp9wdgfT0BiUQWxscjsLj4GqpVgHD4vp5lD5/9kcBi6QhkMt/A5wtALleGjY0kDA/fht3dQ5BlAJOJAJq2PEKjmlMJurp0vTpdGzCMFxMZBBjB4ehTp6JAkpQiVsvEhNzTQjA29rlNFNnzPl8vJtHg9dLg93uAoi7A4OA1qFTqBAaDCeMKfYIjT4Lu7i1be/tlrVJ1auquume3WyESCYHRSAHLAoiiQmAEnuftLQpEUTtgs1kadvJ5Qa1qMFDqWqlICASwWs/B8XGVaVHAsqXQ0JBTjRWpxaIIJNmmgpQpCDKeg4xKL+J/0dtCYLebH5IkCRwHOCWsKKuVBaFOoCjAXgCdjsRcW/A3C6OjLz14aFeUq9JqASVqMbGjcfIEUfev0RBIUsMbsjmCwehAQ4Ek/bhkwkuOxw9gaekjZLM5cLl6YGTkARQKZWyqL5DJbIPb7YZA4Cb09/cRy8vv7iA0pT4mj+eVjqY3XxQKRyGK6tSixy1JktbQUid2cblUKt5yOpkbOztplqKo7wRBbHLc0XQyGcv/05M9a/wC59cUbcvinwEAAAAASUVORK5CYII=",
    moleculeCubeCross: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAKnRFWHRDcmVhdGlvbiBUaW1lAE1pIDUgTXJ6IDIwMDMgMjM6MzY6MDEgKzAxMDC/PwNMAAAAB3RJTUUH0wMFFx0vZdSqcwAAAAlwSFlzAAAK8AAACvABQqw0mAAAAARnQU1BAACxjwv8YQUAAALsSURBVHjarVNrSJNhGH2+75vfvuY25/IuKs50UxNBrbwMFbwWqWnQxQwvf0qICBHth4JJZaWE6C+pDAuxKLFBzcRQ0ywrLbw3W1hqbl72remmm5t7c9YEu/zz/Hg5z+Fw4Dy8D8BOAAFgwwIQqQHIbXooFKwksul+DM5v0/nAtXLM8mhjyUaWHz9zrEE59KC88i4TxwJmlvUBY2ODYRJTK/M4kbIcJBQ8WcNs3tT2lqWaHfhJ75/TVeFaKNoMoCMoWuXJs6/kZgBmg+tp2UhzoaIrmVwC7rgCzFI7p2t0jDguUBQQxVFPYKWGNuiWaH7E0GBPWAJS5kyraxPa2I+f5VJ9eNTUBdVg2v6TjmwXWzOhnMUYi6WXo50pUiP7NtUY2NSE3L4YPORqaHgI8GyrV0l1TUt8atoxC190h3so3RahcEAdBCy7BwW7WH25Z/MT8zKzuq0zw0oo7dIMj7Rxt/AFBZT3S3VhBiO4tyWlGb+3SpRW324uh6MBpLLOuJUIhUI4kp4uRgid9jeDvKOiumaprg6PFHuz53A4Y/WxKIpDEoTmrwC34VEvqrQ0boM6TfX1ZRyoulHhqV9jnxK5MK8nJpcczc4OtPiMFJtjZLG3ArDf/wDvdmQZo08E460jJK1WKO0yExiE9KnW7COOllwcl/XwwsLyfHHjZOrSwJ53SsBcX3yIOQQwv7mDaVfYtahZxYBHgnBdzhdEcKFHMmU0XKrViXJzMiyefRSz1p/UP3YIWffP+zoINQCHN+T6zQBPBegGi4s6uhrr4mLjPUA3rYYFQYhMx3Pwma+uEhdOznr7OvKLZ0xgenv7psx1AdadANq2KrwCyMEEdrciEzwYsGIAMBuhs2sevK5cBVuChc4NyMZUo0Nlne3tzb8a/4FmAh9GBXvRSKiD+aWIr0apzghlOaLXfq6IbqxfbwWw/98dbVZwwkHecueTr1Zjyp8EuK+agF6KgfkxmQgbb5E+Ogig3pGr/Rd+Ai1UJxH01MR4AAAAAElFTkSuQmCC",
    greenPill: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAK3RFWHRDcmVhdGlvbiBUaW1lAE1pIDE3IFNlcCAyMDAzIDIzOjI5OjEwICswMTAwQo74agAAAAd0SU1FB9MJERUdI/ot6l8AAAAJcEhZcwAACvAAAArwAUKsNJgAAAAEZ0FNQQAAsY8L/GEFAAACa0lEQVR42qWTT0hUQRzHv+/Ne+7uc3dphVSMjYoWsbA/h6g8iNWtKCjqoEmXugoh0aFDHkICLx2ELh0khAjKCIsKPGSY7FL+QYvIlCKSfM99m2/dt7O7789Ms4fCUknoC78fM8x8P/zmNzPAf0r6NejpGW4Nh8m1aLQybhjWhCSFbnR2Hn65IUpX1/P2oaE55vucU8p5Nsv54OBHv7d3/OqGAN3dz97rOucLus/TJue6ISAW5+Mpi9++NXnnSscTdT2vXE7BoBpPmzlYVgk0z6CIg9kFhtfBPqQSNy99PdT34uzEsdi6AF3PTGcyJuycDbfEMW1+wIm3ccwGBrDjgI14k3V00ZxLNifrd64J8H3SPT72iS0t/YCeNtA6eRAtiW2IqVVw86JCSUVzw+56vuykGodrW1YCSDklkw/m9u87J0jekae5fpDIDKJyCAWfig0EnIsl5iFRW6MZeq5NviB9s/oLU78BZY2O3n/V2HAmMZwf2BMN5eA7HMxjKHmOADARHI7noi4UIxmTnqSnvWTxoftZWVmOprkX82Zhu15Bm5woR6DSRSisoBhxEKxUQQgRRQK7gtXknbFwXViGpL+bgstaTSDnvamvjW1VNVkYFWgRBRUBAlmRQSRJhIIRY7642JENrQaU1Ya9GgIjW6rDETUooSJIoKjlEAAi5jLBxPJiOttFq5U1AfcwRU95rd+p/XhTTFWIMKtlsypBJTKYuLssLT36o4mrNMNn/TpuOjY7zhmTPMrgFrl4aD7mLXtWvPvzmAJdHyDEv/AxvllKFbN+vFRgVdT20suF0l3msnYMILOhf/Iv/QS2OyBbr28yxQAAAABJRU5ErkJggg==",
    iceCube: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAK3RFWHRDcmVhdGlvbiBUaW1lAE1pIDE5IEZlYiAyMDAzIDAwOjU2OjEzICswMTAwhV8lEQAAAAd0SU1FB9MCEwAKIKGTp3IAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAEZ0FNQQAAsY8L/GEFAAACoUlEQVR42qWTz08TQRTHvzOz3W63lLbQWixIBRU08QdcTAwxil5M0IPRuwfiP6DGq3f9B4gXPegBLx5M8KAnY6JEQtB4QIOGIhhagVbLtrvbnRnfQqwYj0wyO28y8z7v+97bAXY52B/jflHnN1cwmmlTp3tTOKYYhp+t+7FAonIiLsp5Q5RW6qpc9VQpcLDka/Xkzmhs0Qidn6/qiZEOXE/0hkCOL75kjUDjYlwgE2Xp/ZZIL3vBoPA1phZcJHMMqXU2Tq6DW4DFqjduWIxlOUefLdgBUwAmHdjb6r65Cg+Xm/hck+i2GYpNhbhgA+HZFsBpKuNVRUNoYI/JMUSR10lBv8UxYJNNDnsthqH2CGZ+BogEgFQqaAF8qd2UgCU0A91DmRzmHYVKU2ODQO8dCUnwGtkWZ6BM4PjaDX15+FFSNxlZFbogaA2nRVkE0ARRsGmfpD35ImcyXMpGoQLdaAGSgjlRxhAnPZzoaYPjYIzjsG0gFxXYR1NTfbvMcAUelzw0KGgLUHVlszdmoDvKsY/yXqGiFT1FTVYhHHWp4ChKx1eULnCh0wQ14q8CLbUf5jhdlTiTNuFpjdlfElNrATJU1KKrcZzkHU0IMLo3U6PgSnmtIkakdgiDBO0mSR51EgUqgmRhXRTaKP+iJ0kBwxtqZZ3OI9D1FmDVDZwRkl+mqrsU7VrBwpXstrMkNcNEThoM7TQ3qde9dgR331amW4D5jdqLl5/MU1cLMRzp5PhI0fIRvtW6bIT+xgjw9AcpI1XLJY5Hc8Hk7Dtxe8db0Ozkg9pYLpoYM7k639FeP9TfI5BKM1zusTCzGaDkSizMBY3JD/aNrzf5xH+PaefI3FrqFqo2moqZ5zq7omfzKaNv9bs7+3pNjONeYW63L/if8Rs4lyRrD9xpXAAAAABJRU5ErkJggg=="
};